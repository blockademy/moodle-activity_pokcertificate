{"version":3,"file":"homepage.min.js","sources":["../src/homepage.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n\nimport $ from 'jquery';\nimport Ajax from 'core/ajax';\nimport Templates from 'core/templates';\nimport {get_string as getString} from 'core/str';\nimport ModalFactory from 'core/modal_factory';\nimport cardPaginate from 'mod_pokcertificate/cardPaginate';\n\nvar selector = {\n    'container': '.programs_container',\n    'targetElement': '.programs_sectors_list',\n    'moreprograms': '[data-action=\"moreprograms\"]'\n}\nexport default class HomePage {\n     init()  {\n        let sector=0;\n        $(selector.targetElement +' li.nav-item').on('click', function(e) {\n            e.preventDefault();\n            sector = e.target.getAttribute('data-id');\n            $(selector.targetElement +' li.nav-item a.active').removeClass('active');\n            $(this).children('a').addClass('active');\n            var promise = Ajax.call([{\n                    methodname: 'local_trainingprogram_programcards',\n                    args: {'sector': sector }\n                }]);\n            promise[0].done(function(resp) {\n                Templates.render('mod_pokcertificate/homepage/program_card',{'programs': resp}).done(function(html, js) {\n                    Templates.replaceNodeContents(selector.container, html, js);\n                });\n            });\n\n        });\n    }\n    morePrograms()  {\n        \n        $(selector.moreprograms).on('click', function(e) {\n            e.preventDefault();\n            let pagenumber = e.target.getAttribute('data-pagenumber');\n            let limit = e.target.getAttribute('data-limit');\n            let numberofprograms = e.target.getAttribute('data-numberofprograms');\n            let options = $(this).data('options');\n            let perpage = parseInt(pagenumber)+parseInt(limit);\n            options.perPage = perpage;\n            let dataoptions = $(this).data('dataoptions');\n            let filterdatavalue = $(this).data('filterdata');\n            \n            if(perpage != numberofprograms){\n                cardPaginate.reload(options, dataoptions,filterdatavalue);\n            }\n            if(pagenumber == numberofprograms){\n                $(this).hide();\n            }\n            \n             $(this).attr('data-pagenumber', perpage);\n        });\n    }\n\n\n    confirmbox(message) {\n         ModalFactory.create({\n            body: message,\n            type: ModalFactory.types.ALERT,\n            buttons: {\n                cancel: getString('ok'),\n            },\n            removeOnClose: true,\n          })\n          .done(function(modal) {\n            modal.show();\n          });\n    }\n}\n"],"names":["selector","init","sector","on","e","preventDefault","target","getAttribute","removeClass","this","children","addClass","Ajax","call","methodname","args","done","resp","render","html","js","replaceNodeContents","morePrograms","pagenumber","limit","numberofprograms","options","data","perpage","parseInt","perPage","dataoptions","filterdatavalue","reload","hide","attr","confirmbox","message","create","body","type","ModalFactory","types","ALERT","buttons","cancel","removeOnClose","modal","show"],"mappings":"knBAuBIA,mBACa,sBADbA,uBAEiB,yBAFjBA,sBAGgB,6DAGfC,WACOC,OAAO,sBACTF,uBAAwB,gBAAgBG,GAAG,SAAS,SAASC,GAC3DA,EAAEC,iBACFH,OAASE,EAAEE,OAAOC,aAAa,+BAC7BP,uBAAwB,yBAAyBQ,YAAY,8BAC7DC,MAAMC,SAAS,KAAKC,SAAS,UACjBC,cAAKC,KAAK,CAAC,CACjBC,WAAY,qCACZC,KAAM,QAAWb,WAEjB,GAAGc,MAAK,SAASC,yBACXC,OAAO,2CAA2C,UAAaD,OAAOD,MAAK,SAASG,KAAMC,uBACtFC,oBAAoBrB,mBAAoBmB,KAAMC,aAMxEE,mCAEMtB,uBAAuBG,GAAG,SAAS,SAASC,GAC1CA,EAAEC,qBACEkB,WAAanB,EAAEE,OAAOC,aAAa,mBACnCiB,MAAQpB,EAAEE,OAAOC,aAAa,cAC9BkB,iBAAmBrB,EAAEE,OAAOC,aAAa,yBACzCmB,SAAU,mBAAEjB,MAAMkB,KAAK,WACvBC,QAAUC,SAASN,YAAYM,SAASL,OAC5CE,QAAQI,QAAUF,YACdG,aAAc,mBAAEtB,MAAMkB,KAAK,eAC3BK,iBAAkB,mBAAEvB,MAAMkB,KAAK,cAEhCC,SAAWH,wCACGQ,OAAOP,QAASK,YAAYC,iBAE1CT,YAAcE,sCACXhB,MAAMyB,2BAGTzB,MAAM0B,KAAK,kBAAmBP,YAKzCQ,WAAWC,gCACOC,OAAO,CACjBC,KAAMF,QACNG,KAAMC,uBAAaC,MAAMC,MACzBC,QAAS,CACLC,QAAQ,mBAAU,OAEtBC,eAAe,IAEhB9B,MAAK,SAAS+B,OACbA,MAAMC"}